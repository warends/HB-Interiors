'use strict';

var app = angular.module('hb-interiors', ['home', 'services', 'common', 'ed.controller', 'contact.controller', 'about.controller', 'ui.router', 'ngScrollReveal']);

app.config(['$locationProvider', '$stateProvider', '$urlRouterProvider', function ($locationProvider, $stateProvider, $urlRouterProvider) {

    $urlRouterProvider.otherwise('/');
    $locationProvider.html5Mode(true);

    $stateProvider.state('home', {
        url: '/',
        templateUrl: '/partials/home/home',
        controller: 'HomeController'
    }).state('services', {
        url: '/services',
        templateUrl: '/partials/services/services',
        controller: 'ServiceController'
    }).state('e-design', {
        url: '/e-design',
        templateUrl: '/partials/ed/ed',
        controller: 'EDesignController'
    }).state('about', {
        url: '/about',
        templateUrl: '/partials/about/about',
        controller: 'AboutController'
    }).state('contact', {
        url: '/contact',
        templateUrl: '/partials/contact/contact',
        controller: 'ContactController'
    }).state('services.detail', {
        url: '/:slug',
        templateUrl: '/partials/services/services-detail',
        controller: 'SelectedServiceController'
    });
}]);

app.run(['$rootScope', '$location', function ($rootScope, $location) {

    // $rootScope.$on('$routeChangeError', function(evt, current, previous, rejection) {
    //     if(rejection === 'not authorized') {
    //       $location.path('/');
    //     }
    // });

    $rootScope.$on("$stateChangeSuccess", function (event, currentRoute, previousRoute) {});
}]);
'use strict';

angular.module('about.controller', []).controller('AboutController', ['$scope', function ($scope) {

  $scope.isActive = false;
  $scope.minusSign = false;
  $scope.expandBio = function () {
    $scope.minusSign = !$scope.minusSign;
    $scope.isActive = !$scope.isActive;
  };
}]);
'use strict';

angular.module('common', ['common.modal', 'common.inview', 'common.meta']);
'use strict';

angular.module('common.inview', []).directive('inView', ['$window', function ($window) {
    return {
        restrict: 'A',
        link: function link(scope, element, attrs) {
            angular.element($window).bind('scroll', function () {
                var $el = element[0],
                    pos = $el.getBoundingClientRect(),
                    offset = 0;
                if (pos.top + offset < $window.scrollY) {
                    scope.view = true;
                    console.log('in view :' + scope.view);
                } else {
                    scope.view = false;
                }
                scope.$apply();
            });
        }

    };
}]);
'use strict';

angular.module('common.meta', []).factory('Meta', function () {
  var _title = 'Hayley Bagwell Interior Design, Seattle, WA';
  var desc = 'Super DERRR';
  return {
    title: function title() {
      return _title;
    },
    setTitle: function setTitle(newTitle) {
      _title = newTitle;
    },
    description: function description() {
      return desc;
    },
    setDesc: function setDesc(newDesc) {
      desc = newDesc;
    }
  };
}).controller('MetaController', ['$scope', 'Meta', function ($scope, Meta) {
  $scope.Meta = Meta;
  $scope.metaDesc = Meta;
}]);
'use strict';

angular.module('common.modal', []).directive('globalModal', function () {

  return {
    restrict: 'E',
    scope: {
      show: '='
    },
    replace: true,
    transclude: true,
    link: function link(scope, element, attrs) {
      scope.dialogStyle = {};
      if (attrs.width) scope.dialogStyle.width = attrs.width;
      if (attrs.height) scope.dialogStyle.height = attrs.height;

      scope.hideModal = function () {
        scope.show = false;
      };
    },
    templateUrl: '/partials/common/modal'
  };
});
'use strict';

angular.module('contact.controller', []).controller('ContactController', ['$scope', '$http', function ($scope, $http) {

  $scope.form = {};

  $scope.sendMail = function () {
    var data = {
      contactName: this.contactName,
      contactCompany: this.contactCompany,
      contactEmail: this.contactEmail,
      contactMessage: this.contactMessage
    };

    $http.post('/contact-form', data).then(function (message, status, headers, config) {
      notifier.notify('Thank you for your message ' + message.data.contactName);
      $scope.form.contactForm.$setPristine();
      $scope.form.contactForm.$setUntouched();
    }, function (message, status, headers, config) {
      notifier.notify('There was an error processing your request. Please try again');
    });
    this.contactName = null;
    this.contactCompany = null;
    this.contactEmail = null;
    this.contactMessage = null;
  };
}]);
'use strict';

angular.module('ed.controller', []).controller('EDesignController', ['$scope', '$http', function ($scope, $http) {
    window.scrollTo(0, 0);

    $scope.qShow = false;
    $scope.toggleQForm = function () {
        $scope.qShow = !$scope.qShow;
    };

    $scope.formData = {};

    $scope.submitQuestionaire = function () {
        console.log($scope.formData);
        $http.post('/questionaire-form', $scope.formData).then(function (response) {
            console.log(response.data);
        }, function (err) {
            console.log('There was a problem submitting your form ' + err);
        });
    };
}]);
'use strict';

angular.module('banner.dir', []).directive('pageBanner', function () {
  return {
    restrict: 'E',
    templateUrl: '/partials/home/banner',
    replace: true,
    scope: { bgImage: '@' }
  };
});
'use strict';

angular.module('box.height.dir', []).directive('boxHeight', ['$window', '$timeout', function ($window, $timeout) {
  return {
    restrict: 'A',
    link: function link(scope, elem, attrs) {
      $timeout(function () {
        scope.newHeight = elem[0].offsetHeight;
      }, 500);
      angular.element($window).bind('resize', function () {
        scope.$apply(function () {
          scope.newHeight = elem[0].offsetHeight;
        });
      });
    }
  };
}]);

angular.module('target.height.dir', []).directive('targetHeight', function () {
  return {
    restrict: 'A',
    link: function link(scope, elem, attrs) {
      scope.$watch('newHeight', function (newV, oldV) {
        //console.log('old value ' + oldV, 'new value ' + newV);
        elem.attr('style', 'height: ' + newV + 'px');
      });
    }
  };
});
'use strict';

angular.module('home.controller', []).controller('HomeController', ['$scope', 'ServiceFactory', function ($scope, ServiceFactory) {

  $scope.services = ServiceFactory.list();
}]);
'use strict';

angular.module('home', ['home.controller', 'box.height.dir', 'target.height.dir', 'banner.dir']);
'use strict';

angular.module('service.controller', []).controller('ServiceController', ['$scope', '$stateParams', 'ServiceFactory', function ($scope, $stateParams, ServiceFactory) {
  $scope.services = ServiceFactory.list();
}]);

angular.module('service.detail.controller', []).controller('SelectedServiceController', ['$scope', '$stateParams', 'ServiceFactory', function ($scope, $stateParams, ServiceFactory) {
  $scope.selectedService = ServiceFactory.find($stateParams.slug);
}]);
'use strict';

angular.module('service.factory', []).factory('ServiceFactory', function () {
  var services = [
  // {
  //   name: 'e-Design',
  //   logo: 'img/icons/construction.png'
  // },
  {
    name: 'Space Planning',
    slug: 'space-planning',
    logo: 'img/icons/house-plan.png',
    banner: 'img/services/floor-plan.png',
    subHead: 'creating individualized products',
    desc: "What is it? Do you feel like your space is not functional? Would you like assistance arranging a layout for your space? We can help!\n \nWe will organize your existing furniture in a way that creates a more natural and functional flow to make the best use of your space."
  }, {
    name: 'Branding',
    slug: 'branding',
    logo: 'img/icons/branding.png',
    banner: 'img/services/branding.jpg',
    subHead: 'Helping your customers get to know you',
    desc: "It is important to be able to stand out from the rest of the designers in your area.  By creating branding tools that potential clients or architects can get their hands on moves you to the front of the line.\n \nWe develop these business tools, such as portfolio booklets and business cards to reach your specific audience."
  }, {
    name: 'Interior Design',
    slug: 'interior-design',
    logo: 'img/icons/think-draw-build.png',
    banner: 'img/services/master-br.png',
    subHead: 'creating individualized products',
    desc: "If you are local to the Seattle area, we are here to assist you in your design needs.  We want you to feel at home in your home.  It is very important for us to get to know you and your style.  We will then be able to develop a design that is a reflection of you.\n \nThis is a more traditional form of design.  We will get to know you further by meeting and discussing your design needs and desires.  A design package with concepts will be created all the way through installation."
  }, {
    name: 'Furniture Design',
    slug: 'furniture',
    logo: 'img/icons/construction.png',
    banner: 'img/services/bench.png',
    subHead: 'creating individualized products',
    desc: "We love producing industrial, rustic and sustainable pieces.  These can be brand new pieces or repurposed furniture.  Breathing new life into second hand furniture is not only rewarding, but also helps to keep furniture from uselessly going to the trash.\n \nIf there were a certain piece of furniture you are looking for, we would love to be part of the process to create that perfect piece for you."
  }];

  return {
    list: function list() {
      return services;
    },
    find: function find(slug) {
      return _.find(services, function (service) {
        return service.slug == slug;
      });
    }
  };
});
'use strict';

angular.module('services', ['service.controller', 'service.detail.controller', 'service.factory']);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImFib3V0L2Fib3V0LmNvbnRyb2xsZXIuanMiLCJjb21tb24vY29tbW9uLm1vZHVsZS5qcyIsImNvbW1vbi9pbnZpZXcuZGlyZWN0aXZlLmpzIiwiY29tbW9uL21ldGEuY29udHJvbGxlci5qcyIsImNvbW1vbi9tb2RhbC5kaXJlY3RpdmUuanMiLCJjb250YWN0L2NvbnRhY3QuY29udHJvbGxlci5qcyIsImVkL2VEZXNpZ24uY29udHJvbGxlci5qcyIsImhvbWUvYmFubmVyLmRpcmVjdGl2ZS5qcyIsImhvbWUvYm94LmRpcmVjdGl2ZS5qcyIsImhvbWUvaG9tZS5jb250cm9sbGVyLmpzIiwiaG9tZS9ob21lLm1vZHVsZS5qcyIsInNlcnZpY2VzL3NlcnZpY2UuY29udHJvbGxlci5qcyIsInNlcnZpY2VzL3NlcnZpY2UuZmFjdG9yeS5qcyIsInNlcnZpY2VzL3NlcnZpY2UubW9kdWxlLmpzIl0sIm5hbWVzIjpbImFwcCIsImFuZ3VsYXIiLCJtb2R1bGUiLCJjb25maWciLCIkbG9jYXRpb25Qcm92aWRlciIsIiRzdGF0ZVByb3ZpZGVyIiwiJHVybFJvdXRlclByb3ZpZGVyIiwib3RoZXJ3aXNlIiwiaHRtbDVNb2RlIiwic3RhdGUiLCJ1cmwiLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXIiLCJydW4iLCIkcm9vdFNjb3BlIiwiJGxvY2F0aW9uIiwiJG9uIiwiZXZlbnQiLCJjdXJyZW50Um91dGUiLCJwcmV2aW91c1JvdXRlIiwiJHNjb3BlIiwiaXNBY3RpdmUiLCJtaW51c1NpZ24iLCJleHBhbmRCaW8iLCJkaXJlY3RpdmUiLCIkd2luZG93IiwicmVzdHJpY3QiLCJsaW5rIiwic2NvcGUiLCJlbGVtZW50IiwiYXR0cnMiLCJiaW5kIiwiJGVsIiwicG9zIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0Iiwib2Zmc2V0IiwidG9wIiwic2Nyb2xsWSIsInZpZXciLCJjb25zb2xlIiwibG9nIiwiJGFwcGx5IiwiZmFjdG9yeSIsInRpdGxlIiwiZGVzYyIsInNldFRpdGxlIiwibmV3VGl0bGUiLCJkZXNjcmlwdGlvbiIsInNldERlc2MiLCJuZXdEZXNjIiwiTWV0YSIsIm1ldGFEZXNjIiwic2hvdyIsInJlcGxhY2UiLCJ0cmFuc2NsdWRlIiwiZGlhbG9nU3R5bGUiLCJ3aWR0aCIsImhlaWdodCIsImhpZGVNb2RhbCIsIiRodHRwIiwiZm9ybSIsInNlbmRNYWlsIiwiZGF0YSIsImNvbnRhY3ROYW1lIiwiY29udGFjdENvbXBhbnkiLCJjb250YWN0RW1haWwiLCJjb250YWN0TWVzc2FnZSIsInBvc3QiLCJ0aGVuIiwibWVzc2FnZSIsInN0YXR1cyIsImhlYWRlcnMiLCJub3RpZmllciIsIm5vdGlmeSIsImNvbnRhY3RGb3JtIiwiJHNldFByaXN0aW5lIiwiJHNldFVudG91Y2hlZCIsIndpbmRvdyIsInNjcm9sbFRvIiwicVNob3ciLCJ0b2dnbGVRRm9ybSIsImZvcm1EYXRhIiwic3VibWl0UXVlc3Rpb25haXJlIiwicmVzcG9uc2UiLCJlcnIiLCJiZ0ltYWdlIiwiJHRpbWVvdXQiLCJlbGVtIiwibmV3SGVpZ2h0Iiwib2Zmc2V0SGVpZ2h0IiwiJHdhdGNoIiwibmV3ViIsIm9sZFYiLCJhdHRyIiwiU2VydmljZUZhY3RvcnkiLCJzZXJ2aWNlcyIsImxpc3QiLCIkc3RhdGVQYXJhbXMiLCJzZWxlY3RlZFNlcnZpY2UiLCJmaW5kIiwic2x1ZyIsIm5hbWUiLCJsb2dvIiwiYmFubmVyIiwic3ViSGVhZCIsIl8iLCJzZXJ2aWNlIl0sIm1hcHBpbmdzIjoiOztBQUFBLElBQU1BLE1BQU1DLFFBQVFDLE1BQVIsQ0FBZSxjQUFmLEVBQStCLENBQUMsTUFBRCxFQUFTLFVBQVQsRUFBcUIsUUFBckIsRUFBK0IsZUFBL0IsRUFBZ0Qsb0JBQWhELEVBQXNFLGtCQUF0RSxFQUEwRixXQUExRixFQUF1RyxnQkFBdkcsQ0FBL0IsQ0FBWjs7QUFFQUYsSUFBSUcsTUFBSixDQUFXLENBQUMsbUJBQUQsRUFBc0IsZ0JBQXRCLEVBQXdDLG9CQUF4QyxFQUE4RCxVQUFDQyxpQkFBRCxF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RXlELFVBQU0sVUFEUjtBQUVFRCxVQUFNLFVBRlI7QUFHRUUsVUFBTSx3QkFIUjtBQUlFQyxZQUFRLDJCQUpWO0FBS0VDLGFBQVMsd0NBTFg7QUFNRTVELFVBQU07QUFOUixHQWJhLEVBcUJiO0FBQ0V5RCxVQUFNLGlCQURSO0FBRUVELFVBQU0saUJBRlI7QUFHRUUsVUFBTSxnQ0FIUjtBQUlFQyxZQUFRLDRCQUpWO0FBS0VDLGFBQVMsa0NBTFg7QUFNRTVELFVBQU07QUFOUixHQXJCYSxFQTZCYjtBQUNFeUQsVUFBTSxrQkFEUjtBQUVFRCxVQUFNLFdBRlI7QUFHRUUsVUFBTSw0QkFIUjtBQUlFQyxZQUFRLHdCQUpWO0FBS0VDLGFBQVMsa0NBTFg7QUFNRTVELFVBQU07QUFOUixHQTdCYSxDQUFmOztBQXVDQSxTQUFPO0FBQ0xvRCxVQUFNLGdCQUFVO0FBQ2QsYUFBT0QsUUFBUDtBQUNELEtBSEk7QUFJTEksVUFBTSxjQUFTQyxJQUFULEVBQWM7QUFDaEIsYUFBT0ssRUFBRU4sSUFBRixDQUFPSixRQUFQLEVBQWlCLFVBQUNXLE9BQUQsRUFBYTtBQUNuQyxlQUFPQSxRQUFRTixJQUFSLElBQWdCQSxJQUF2QjtBQUNELE9BRk0sQ0FBUDtBQUdIO0FBUkksR0FBUDtBQVVELENBbEREOzs7QUNBQW5HLFFBQVFDLE1BQVIsQ0FBZSxVQUFmLEVBQTJCLENBQUMsb0JBQUQsRUFBdUIsMkJBQXZCLEVBQW9ELGlCQUFwRCxDQUEzQiIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgYXBwID0gYW5ndWxhci5tb2R1bGUoJ2hiLWludGVyaW9ycycsIFsnaG9tZScsICdzZXJ2aWNlcycsICdjb21tb24nLCAnZWQuY29udHJvbGxlcicsICdjb250YWN0LmNvbnRyb2xsZXInLCAnYWJvdXQuY29udHJvbGxlcicsICd1aS5yb3V0ZXInLCAnbmdTY3JvbGxSZXZlYWwnXSk7XHJcblxyXG5hcHAuY29uZmlnKFsnJGxvY2F0aW9uUHJvdmlkZXInLCAnJHN0YXRlUHJvdmlkZXInLCAnJHVybFJvdXRlclByb3ZpZGVyJywgKCRsb2NhdGlvblByb3ZpZGVyLCAkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyKSA9PiB7XHJcblxyXG4gICAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZSgnLycpO1xyXG4gICAgJGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKHRydWUpO1xyXG5cclxuICAgICRzdGF0ZVByb3ZpZGVyXHJcbiAgICAgIC5zdGF0ZSgnaG9tZScsIHtcclxuICAgICAgICAgIHVybDogJy8nLFxyXG4gICAgICAgICAgdGVtcGxhdGVVcmw6ICcvcGFydGlhbHMvaG9tZS9ob21lJyxcclxuICAgICAgICAgIGNvbnRyb2xsZXI6ICdIb21lQ29udHJvbGxlcidcclxuICAgICAgfSlcclxuICAgICAgLnN0YXRlKCdzZXJ2aWNlcycsIHtcclxuICAgICAgICAgIHVybDogJy9zZXJ2aWNlcycsXHJcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogJy9wYXJ0aWFscy9zZXJ2aWNlcy9zZXJ2aWNlcycsXHJcbiAgICAgICAgICBjb250cm9sbGVyOiAnU2VydmljZUNvbnRyb2xsZXInXHJcbiAgICAgIH0pXHJcbiAgICAgIC5zdGF0ZSgnZS1kZXNpZ24nLCB7XHJcbiAgICAgICAgICB1cmw6ICcvZS1kZXNpZ24nLFxyXG4gICAgICAgICAgdGVtcGxhdGVVcmw6ICcvcGFydGlhbHMvZWQvZWQnLFxyXG4gICAgICAgICAgY29udHJvbGxlcjogJ0VEZXNpZ25Db250cm9sbGVyJ1xyXG4gICAgICB9KVxyXG4gICAgICAuc3RhdGUoJ2Fib3V0Jywge1xyXG4gICAgICAgICAgdXJsOiAnL2Fib3V0JyxcclxuICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3BhcnRpYWxzL2Fib3V0L2Fib3V0JyxcclxuICAgICAgICAgIGNvbnRyb2xsZXI6ICdBYm91dENvbnRyb2xsZXInXHJcbiAgICAgIH0pXHJcbiAgICAgIC5zdGF0ZSgnY29udGFjdCcsIHtcclxuICAgICAgICAgIHVybDogJy9jb250YWN0JyxcclxuICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3BhcnRpYWxzL2NvbnRhY3QvY29udGFjdCcsXHJcbiAgICAgICAgICBjb250cm9sbGVyOiAnQ29udGFjdENvbnRyb2xsZXInXHJcbiAgICAgIH0pXHJcbiAgICAgIC5zdGF0ZSgnc2VydmljZXMuZGV0YWlsJywge1xyXG4gICAgICAgICAgdXJsOiAnLzpzbHVnJyxcclxuICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3BhcnRpYWxzL3NlcnZpY2VzL3NlcnZpY2VzLWRldGFpbCcsXHJcbiAgICAgICAgICBjb250cm9sbGVyOiAnU2VsZWN0ZWRTZXJ2aWNlQ29udHJvbGxlcidcclxuICAgICAgfSk7XHJcbn1dKTtcclxuXHJcblxyXG5hcHAucnVuKFsnJHJvb3RTY29wZScsICckbG9jYXRpb24nLCBmdW5jdGlvbigkcm9vdFNjb3BlLCAkbG9jYXRpb24pe1xyXG5cclxuICAvLyAkcm9vdFNjb3BlLiRvbignJHJvdXRlQ2hhbmdlRXJyb3InLCBmdW5jdGlvbihldnQsIGN1cnJlbnQsIHByZXZpb3VzLCByZWplY3Rpb24pIHtcclxuICAvLyAgICAgaWYocmVqZWN0aW9uID09PSAnbm90IGF1dGhvcml6ZWQnKSB7XHJcbiAgLy8gICAgICAgJGxvY2F0aW9uLnBhdGgoJy8nKTtcclxuICAvLyAgICAgfVxyXG4gIC8vIH0pO1xyXG5cclxuICAkcm9vdFNjb3BlLiRvbihcIiRzdGF0ZUNoYW5nZVN1Y2Nlc3NcIiwgZnVuY3Rpb24gKGV2ZW50LCBjdXJyZW50Um91dGUsIHByZXZpb3VzUm91dGUpIHtcclxuXHJcbiAgfSk7XHJcblxyXG59XSk7XHJcbiIsImFuZ3VsYXIubW9kdWxlKCdhYm91dC5jb250cm9sbGVyJywgW10pLmNvbnRyb2xsZXIoJ0Fib3V0Q29udHJvbGxlcicsIFsnJHNjb3BlJywgKCRzY29wZSkgPT4ge1xyXG5cclxuICAkc2NvcGUuaXNBY3RpdmUgPSBmYWxzZTtcclxuICAkc2NvcGUubWludXNTaWduID0gZmFsc2U7XHJcbiAgJHNjb3BlLmV4cGFuZEJpbyA9ICgpID0+IHtcclxuICAgICAgJHNjb3BlLm1pbnVzU2lnbiA9ICEkc2NvcGUubWludXNTaWduO1xyXG4gICAgICAkc2NvcGUuaXNBY3RpdmUgPSAhJHNjb3BlLmlzQWN0aXZlO1xyXG4gIH07XHJcblxyXG59XSk7XHJcbiIsImFuZ3VsYXIubW9kdWxlKCdjb21tb24nLCBbJ2NvbW1vbi5tb2RhbCcsICdjb21tb24uaW52aWV3JywgJ2NvbW1vbi5tZXRhJ10pO1xyXG4iLCJhbmd1bGFyLm1vZHVsZSgnY29tbW9uLmludmlldycsIFtdKS5kaXJlY3RpdmUoJ2luVmlldycsIFsnJHdpbmRvdycsICgkd2luZG93KSA9PiB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHJlc3RyaWN0OiAnQScsXHJcbiAgICAgICAgbGluazogKHNjb3BlLCBlbGVtZW50LCBhdHRycykgPT4ge1xyXG4gICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJHdpbmRvdykuYmluZCgnc2Nyb2xsJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdmFyICRlbCA9IGVsZW1lbnRbMF0sXHJcbiAgICAgICAgICAgICAgICAgICAgcG9zID0gJGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLFxyXG4gICAgICAgICAgICAgICAgICAgIG9mZnNldCA9IDA7XHJcbiAgICAgICAgICAgICAgICBpZihwb3MudG9wICsgb2Zmc2V0IDwgJHdpbmRvdy5zY3JvbGxZKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUudmlldyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2luIHZpZXcgOicgKyBzY29wZS52aWV3KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUudmlldyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgc2NvcGUuJGFwcGx5KCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9O1xyXG59XSk7XHJcbiIsImFuZ3VsYXIubW9kdWxlKCdjb21tb24ubWV0YScsIFtdKS5mYWN0b3J5KCdNZXRhJywgZnVuY3Rpb24oKXtcclxuICB2YXIgdGl0bGUgPSAnSGF5bGV5IEJhZ3dlbGwgSW50ZXJpb3IgRGVzaWduLCBTZWF0dGxlLCBXQSc7XHJcbiAgdmFyIGRlc2MgPSAnU3VwZXIgREVSUlInO1xyXG4gIHJldHVybiB7XHJcbiAgICB0aXRsZTogZnVuY3Rpb24oKSB7cmV0dXJuIHRpdGxlO30sXHJcbiAgICBzZXRUaXRsZTogZnVuY3Rpb24obmV3VGl0bGUpIHsgdGl0bGUgPSBuZXdUaXRsZSB9LFxyXG4gICAgZGVzY3JpcHRpb246IGZ1bmN0aW9uKCkgeyByZXR1cm4gZGVzYzt9LFxyXG4gICAgc2V0RGVzYyA6IGZ1bmN0aW9uKG5ld0Rlc2MpIHsgZGVzYyA9IG5ld0Rlc2N9XHJcbiAgfVxyXG59KVxyXG4uY29udHJvbGxlcignTWV0YUNvbnRyb2xsZXInLCBbJyRzY29wZScsICdNZXRhJywgZnVuY3Rpb24oJHNjb3BlLCBNZXRhKXtcclxuICAkc2NvcGUuTWV0YSA9IE1ldGE7XHJcbiAgJHNjb3BlLm1ldGFEZXNjID0gTWV0YTtcclxufV0pO1xyXG4iLCJhbmd1bGFyLm1vZHVsZSgnY29tbW9uLm1vZGFsJywgW10pLmRpcmVjdGl2ZSgnZ2xvYmFsTW9kYWwnLCBmdW5jdGlvbigpe1xyXG5cclxuICByZXR1cm57XHJcbiAgICByZXN0cmljdDogJ0UnLFxyXG4gICAgc2NvcGU6IHtcclxuICAgICAgc2hvdzogJz0nXHJcbiAgICB9LFxyXG4gICAgcmVwbGFjZTogdHJ1ZSxcclxuICAgIHRyYW5zY2x1ZGU6IHRydWUsXHJcbiAgICBsaW5rIDogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzKXtcclxuICAgICAgc2NvcGUuZGlhbG9nU3R5bGUgPSB7fTtcclxuICAgICAgaWYoYXR0cnMud2lkdGgpXHJcbiAgICAgICAgc2NvcGUuZGlhbG9nU3R5bGUud2lkdGggPSBhdHRycy53aWR0aDtcclxuICAgICAgaWYgKGF0dHJzLmhlaWdodClcclxuICAgICAgICBzY29wZS5kaWFsb2dTdHlsZS5oZWlnaHQgPSBhdHRycy5oZWlnaHQ7XHJcblxyXG4gICAgICBzY29wZS5oaWRlTW9kYWwgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgIHNjb3BlLnNob3cgPSBmYWxzZTtcclxuICAgICAgfTtcclxuICAgIH0sXHJcbiAgICB0ZW1wbGF0ZVVybDogJy9wYXJ0aWFscy9jb21tb24vbW9kYWwnXHJcbiAgfVxyXG5cclxufSk7XHJcbiIsImFuZ3VsYXIubW9kdWxlKCdjb250YWN0LmNvbnRyb2xsZXInLCBbXSkuY29udHJvbGxlcignQ29udGFjdENvbnRyb2xsZXInLCBbJyRzY29wZScsICckaHR0cCcsICgkc2NvcGUsICRodHRwKSA9PiB7XHJcblxyXG4gICAgJHNjb3BlLmZvcm0gPSB7fTtcclxuXHJcbiAgICAkc2NvcGUuc2VuZE1haWwgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICB2YXIgZGF0YSA9KHtcclxuICAgICAgICAgICBjb250YWN0TmFtZSA6IHRoaXMuY29udGFjdE5hbWUsXHJcbiAgICAgICAgICAgY29udGFjdENvbXBhbnkgOiB0aGlzLmNvbnRhY3RDb21wYW55LFxyXG4gICAgICAgICAgIGNvbnRhY3RFbWFpbCA6IHRoaXMuY29udGFjdEVtYWlsLFxyXG4gICAgICAgICAgIGNvbnRhY3RNZXNzYWdlIDogdGhpcy5jb250YWN0TWVzc2FnZVxyXG4gICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICRodHRwLnBvc3QoJy9jb250YWN0LWZvcm0nLCBkYXRhKVxyXG4gICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKG1lc3NhZ2UsIHN0YXR1cywgaGVhZGVycywgY29uZmlnKXtcclxuICAgICAgICAgICAgIG5vdGlmaWVyLm5vdGlmeSgnVGhhbmsgeW91IGZvciB5b3VyIG1lc3NhZ2UgJyArIG1lc3NhZ2UuZGF0YS5jb250YWN0TmFtZSk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZm9ybS5jb250YWN0Rm9ybS4kc2V0UHJpc3RpbmUoKTtcclxuICAgICAgICAgICAgICAgICRzY29wZS5mb3JtLmNvbnRhY3RGb3JtLiRzZXRVbnRvdWNoZWQoKTtcclxuICAgICAgICAgICB9LCBmdW5jdGlvbihtZXNzYWdlLCBzdGF0dXMsIGhlYWRlcnMsIGNvbmZpZyl7XHJcbiAgICAgICAgICAgICBub3RpZmllci5ub3RpZnkoJ1RoZXJlIHdhcyBhbiBlcnJvciBwcm9jZXNzaW5nIHlvdXIgcmVxdWVzdC4gUGxlYXNlIHRyeSBhZ2FpbicpO1xyXG4gICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgIHRoaXMuY29udGFjdE5hbWUgPSBudWxsO1xyXG4gICAgICAgICAgIHRoaXMuY29udGFjdENvbXBhbnkgPSBudWxsO1xyXG4gICAgICAgICAgIHRoaXMuY29udGFjdEVtYWlsID0gbnVsbDtcclxuICAgICAgICAgICB0aGlzLmNvbnRhY3RNZXNzYWdlID0gbnVsbDtcclxuICAgICAgIH1cclxuXHJcbn1dKTtcclxuIiwiYW5ndWxhci5tb2R1bGUoJ2VkLmNvbnRyb2xsZXInLCBbXSkuY29udHJvbGxlcignRURlc2lnbkNvbnRyb2xsZXInLCBbJyRzY29wZScsICckaHR0cCcsICgkc2NvcGUsICRodHRwKSA9PiB7XHJcbiAgICB3aW5kb3cuc2Nyb2xsVG8oMCwgMCk7XHJcblxyXG4gICAgJHNjb3BlLnFTaG93ID0gZmFsc2U7XHJcbiAgICAkc2NvcGUudG9nZ2xlUUZvcm0gPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICRzY29wZS5xU2hvdyA9ICEkc2NvcGUucVNob3c7XHJcbiAgICB9XHJcblxyXG4gICAgJHNjb3BlLmZvcm1EYXRhID0ge307XHJcblxyXG4gICAgJHNjb3BlLnN1Ym1pdFF1ZXN0aW9uYWlyZSA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLmZvcm1EYXRhKTtcclxuICAgICAgICAkaHR0cC5wb3N0KCcvcXVlc3Rpb25haXJlLWZvcm0nLCAkc2NvcGUuZm9ybURhdGEpXHJcbiAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YSk7XHJcbiAgICAgICAgICAgIH0sIChlcnIpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdUaGVyZSB3YXMgYSBwcm9ibGVtIHN1Ym1pdHRpbmcgeW91ciBmb3JtICcgKyBlcnIpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcblxyXG59XSk7XHJcbiIsImFuZ3VsYXIubW9kdWxlKCdiYW5uZXIuZGlyJywgW10pLmRpcmVjdGl2ZSgncGFnZUJhbm5lcicsICgpID0+IHtcclxuICByZXR1cm4ge1xyXG4gICAgcmVzdHJpY3Q6ICdFJyxcclxuICAgIHRlbXBsYXRlVXJsOiAnL3BhcnRpYWxzL2hvbWUvYmFubmVyJyxcclxuICAgIHJlcGxhY2U6IHRydWUsXHJcbiAgICBzY29wZTogeyBiZ0ltYWdlOiAnQCcgfVxyXG4gIH07XHJcbn0pO1xyXG4iLCJcclxuYW5ndWxhci5tb2R1bGUoJ2JveC5oZWlnaHQuZGlyJywgW10pLmRpcmVjdGl2ZSgnYm94SGVpZ2h0JywgWyckd2luZG93JywgJyR0aW1lb3V0JywgZnVuY3Rpb24gKCR3aW5kb3csICR0aW1lb3V0KSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHJlc3RyaWN0OiAnQScsXHJcbiAgICAgICAgbGluazogKHNjb3BlLCBlbGVtLCBhdHRycykgPT4ge1xyXG4gICAgICAgICAgJHRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICBzY29wZS5uZXdIZWlnaHQgPSBlbGVtWzBdLm9mZnNldEhlaWdodDtcclxuICAgICAgICAgIH0sIDUwMCk7XHJcbiAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJHdpbmRvdykuYmluZCgncmVzaXplJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBzY29wZS4kYXBwbHkoKCkgPT4ge1xyXG4gICAgICAgICAgICAgIHNjb3BlLm5ld0hlaWdodCA9IGVsZW1bMF0ub2Zmc2V0SGVpZ2h0O1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn1dKTtcclxuXHJcbmFuZ3VsYXIubW9kdWxlKCd0YXJnZXQuaGVpZ2h0LmRpcicsIFtdKS5kaXJlY3RpdmUoJ3RhcmdldEhlaWdodCcsIGZ1bmN0aW9uKCl7XHJcbiAgcmV0dXJuIHtcclxuICAgIHJlc3RyaWN0OiAnQScsXHJcbiAgICBsaW5rOiAoc2NvcGUsIGVsZW0sIGF0dHJzKSA9PiB7XHJcbiAgICAgIHNjb3BlLiR3YXRjaCgnbmV3SGVpZ2h0JywgKG5ld1YsIG9sZFYpID0+IHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdvbGQgdmFsdWUgJyArIG9sZFYsICduZXcgdmFsdWUgJyArIG5ld1YpO1xyXG4gICAgICAgIGVsZW0uYXR0cignc3R5bGUnLCAnaGVpZ2h0OiAnICsgbmV3ViArICdweCcpO1xyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gIH1cclxufSk7XHJcbiIsImFuZ3VsYXIubW9kdWxlKCdob21lLmNvbnRyb2xsZXInLCBbXSkuY29udHJvbGxlcignSG9tZUNvbnRyb2xsZXInLCBbJyRzY29wZScsICdTZXJ2aWNlRmFjdG9yeScsIGZ1bmN0aW9uKCRzY29wZSwgU2VydmljZUZhY3Rvcnkpe1xyXG5cclxuICAkc2NvcGUuc2VydmljZXMgPSBTZXJ2aWNlRmFjdG9yeS5saXN0KCk7XHJcblxyXG59XSk7XHJcbiIsImFuZ3VsYXIubW9kdWxlKCdob21lJywgWydob21lLmNvbnRyb2xsZXInLCAnYm94LmhlaWdodC5kaXInLCAndGFyZ2V0LmhlaWdodC5kaXInLCAnYmFubmVyLmRpciddKTtcclxuIiwiYW5ndWxhci5tb2R1bGUoJ3NlcnZpY2UuY29udHJvbGxlcicsIFtdKS5jb250cm9sbGVyKCdTZXJ2aWNlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRzdGF0ZVBhcmFtcycsICdTZXJ2aWNlRmFjdG9yeScsICgkc2NvcGUsICRzdGF0ZVBhcmFtcywgU2VydmljZUZhY3RvcnkpID0+IHtcclxuICAgICRzY29wZS5zZXJ2aWNlcyA9IFNlcnZpY2VGYWN0b3J5Lmxpc3QoKTtcclxufV0pO1xyXG5cclxuYW5ndWxhci5tb2R1bGUoJ3NlcnZpY2UuZGV0YWlsLmNvbnRyb2xsZXInLCBbXSkuY29udHJvbGxlcignU2VsZWN0ZWRTZXJ2aWNlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRzdGF0ZVBhcmFtcycsICdTZXJ2aWNlRmFjdG9yeScsICgkc2NvcGUsICRzdGF0ZVBhcmFtcywgU2VydmljZUZhY3RvcnkpID0+IHtcclxuICAkc2NvcGUuc2VsZWN0ZWRTZXJ2aWNlID0gU2VydmljZUZhY3RvcnkuZmluZCgkc3RhdGVQYXJhbXMuc2x1Zyk7XHJcbn1dKTtcclxuIiwiYW5ndWxhci5tb2R1bGUoJ3NlcnZpY2UuZmFjdG9yeScsIFtdKS5mYWN0b3J5KCdTZXJ2aWNlRmFjdG9yeScsICgpID0+IHtcclxuICB2YXIgc2VydmljZXMgPSBbXHJcbiAgICAvLyB7XHJcbiAgICAvLyAgIG5hbWU6ICdlLURlc2lnbicsXHJcbiAgICAvLyAgIGxvZ286ICdpbWcvaWNvbnMvY29uc3RydWN0aW9uLnBuZydcclxuICAgIC8vIH0sXHJcbiAgICB7XHJcbiAgICAgIG5hbWU6ICdTcGFjZSBQbGFubmluZycsXHJcbiAgICAgIHNsdWc6ICdzcGFjZS1wbGFubmluZycsXHJcbiAgICAgIGxvZ286ICdpbWcvaWNvbnMvaG91c2UtcGxhbi5wbmcnLFxyXG4gICAgICBiYW5uZXI6ICdpbWcvc2VydmljZXMvZmxvb3ItcGxhbi5wbmcnLFxyXG4gICAgICBzdWJIZWFkOiAnY3JlYXRpbmcgaW5kaXZpZHVhbGl6ZWQgcHJvZHVjdHMnLFxyXG4gICAgICBkZXNjOiBcIldoYXQgaXMgaXQ/IERvIHlvdSBmZWVsIGxpa2UgeW91ciBzcGFjZSBpcyBub3QgZnVuY3Rpb25hbD8gV291bGQgeW91IGxpa2UgYXNzaXN0YW5jZSBhcnJhbmdpbmcgYSBsYXlvdXQgZm9yIHlvdXIgc3BhY2U/IFdlIGNhbiBoZWxwIVxcbiBcXG5XZSB3aWxsIG9yZ2FuaXplIHlvdXIgZXhpc3RpbmcgZnVybml0dXJlIGluIGEgd2F5IHRoYXQgY3JlYXRlcyBhIG1vcmUgbmF0dXJhbCBhbmQgZnVuY3Rpb25hbCBmbG93IHRvIG1ha2UgdGhlIGJlc3QgdXNlIG9mIHlvdXIgc3BhY2UuXCJcclxuICB9LFxyXG4gICAge1xyXG4gICAgICBuYW1lOiAnQnJhbmRpbmcnLFxyXG4gICAgICBzbHVnOiAnYnJhbmRpbmcnLFxyXG4gICAgICBsb2dvOiAnaW1nL2ljb25zL2JyYW5kaW5nLnBuZycsXHJcbiAgICAgIGJhbm5lcjogJ2ltZy9zZXJ2aWNlcy9icmFuZGluZy5qcGcnLFxyXG4gICAgICBzdWJIZWFkOiAnSGVscGluZyB5b3VyIGN1c3RvbWVycyBnZXQgdG8ga25vdyB5b3UnLFxyXG4gICAgICBkZXNjOiBcIkl0IGlzIGltcG9ydGFudCB0byBiZSBhYmxlIHRvIHN0YW5kIG91dCBmcm9tIHRoZSByZXN0IG9mIHRoZSBkZXNpZ25lcnMgaW4geW91ciBhcmVhLiAgQnkgY3JlYXRpbmcgYnJhbmRpbmcgdG9vbHMgdGhhdCBwb3RlbnRpYWwgY2xpZW50cyBvciBhcmNoaXRlY3RzIGNhbiBnZXQgdGhlaXIgaGFuZHMgb24gbW92ZXMgeW91IHRvIHRoZSBmcm9udCBvZiB0aGUgbGluZS5cXG4gXFxuV2UgZGV2ZWxvcCB0aGVzZSBidXNpbmVzcyB0b29scywgc3VjaCBhcyBwb3J0Zm9saW8gYm9va2xldHMgYW5kIGJ1c2luZXNzIGNhcmRzIHRvIHJlYWNoIHlvdXIgc3BlY2lmaWMgYXVkaWVuY2UuXCJcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIG5hbWU6ICdJbnRlcmlvciBEZXNpZ24nLFxyXG4gICAgICBzbHVnOiAnaW50ZXJpb3ItZGVzaWduJyxcclxuICAgICAgbG9nbzogJ2ltZy9pY29ucy90aGluay1kcmF3LWJ1aWxkLnBuZycsXHJcbiAgICAgIGJhbm5lcjogJ2ltZy9zZXJ2aWNlcy9tYXN0ZXItYnIucG5nJyxcclxuICAgICAgc3ViSGVhZDogJ2NyZWF0aW5nIGluZGl2aWR1YWxpemVkIHByb2R1Y3RzJyxcclxuICAgICAgZGVzYzogXCJJZiB5b3UgYXJlIGxvY2FsIHRvIHRoZSBTZWF0dGxlIGFyZWEsIHdlIGFyZSBoZXJlIHRvIGFzc2lzdCB5b3UgaW4geW91ciBkZXNpZ24gbmVlZHMuICBXZSB3YW50IHlvdSB0byBmZWVsIGF0IGhvbWUgaW4geW91ciBob21lLiAgSXQgaXMgdmVyeSBpbXBvcnRhbnQgZm9yIHVzIHRvIGdldCB0byBrbm93IHlvdSBhbmQgeW91ciBzdHlsZS4gIFdlIHdpbGwgdGhlbiBiZSBhYmxlIHRvIGRldmVsb3AgYSBkZXNpZ24gdGhhdCBpcyBhIHJlZmxlY3Rpb24gb2YgeW91LlxcbiBcXG5UaGlzIGlzIGEgbW9yZSB0cmFkaXRpb25hbCBmb3JtIG9mIGRlc2lnbi4gIFdlIHdpbGwgZ2V0IHRvIGtub3cgeW91IGZ1cnRoZXIgYnkgbWVldGluZyBhbmQgZGlzY3Vzc2luZyB5b3VyIGRlc2lnbiBuZWVkcyBhbmQgZGVzaXJlcy4gIEEgZGVzaWduIHBhY2thZ2Ugd2l0aCBjb25jZXB0cyB3aWxsIGJlIGNyZWF0ZWQgYWxsIHRoZSB3YXkgdGhyb3VnaCBpbnN0YWxsYXRpb24uXCJcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIG5hbWU6ICdGdXJuaXR1cmUgRGVzaWduJyxcclxuICAgICAgc2x1ZzogJ2Z1cm5pdHVyZScsXHJcbiAgICAgIGxvZ286ICdpbWcvaWNvbnMvY29uc3RydWN0aW9uLnBuZycsXHJcbiAgICAgIGJhbm5lcjogJ2ltZy9zZXJ2aWNlcy9iZW5jaC5wbmcnLFxyXG4gICAgICBzdWJIZWFkOiAnY3JlYXRpbmcgaW5kaXZpZHVhbGl6ZWQgcHJvZHVjdHMnLFxyXG4gICAgICBkZXNjOiBcIldlIGxvdmUgcHJvZHVjaW5nIGluZHVzdHJpYWwsIHJ1c3RpYyBhbmQgc3VzdGFpbmFibGUgcGllY2VzLiAgVGhlc2UgY2FuIGJlIGJyYW5kIG5ldyBwaWVjZXMgb3IgcmVwdXJwb3NlZCBmdXJuaXR1cmUuICBCcmVhdGhpbmcgbmV3IGxpZmUgaW50byBzZWNvbmQgaGFuZCBmdXJuaXR1cmUgaXMgbm90IG9ubHkgcmV3YXJkaW5nLCBidXQgYWxzbyBoZWxwcyB0byBrZWVwIGZ1cm5pdHVyZSBmcm9tIHVzZWxlc3NseSBnb2luZyB0byB0aGUgdHJhc2guXFxuIFxcbklmIHRoZXJlIHdlcmUgYSBjZXJ0YWluIHBpZWNlIG9mIGZ1cm5pdHVyZSB5b3UgYXJlIGxvb2tpbmcgZm9yLCB3ZSB3b3VsZCBsb3ZlIHRvIGJlIHBhcnQgb2YgdGhlIHByb2Nlc3MgdG8gY3JlYXRlIHRoYXQgcGVyZmVjdCBwaWVjZSBmb3IgeW91LlwiXHJcbiAgICB9XHJcbiAgXTtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIGxpc3Q6IGZ1bmN0aW9uKCl7XHJcbiAgICAgIHJldHVybiBzZXJ2aWNlcztcclxuICAgIH0sXHJcbiAgICBmaW5kOiBmdW5jdGlvbihzbHVnKXtcclxuICAgICAgICByZXR1cm4gXy5maW5kKHNlcnZpY2VzLCAoc2VydmljZSkgPT4ge1xyXG4gICAgICAgICAgcmV0dXJuIHNlcnZpY2Uuc2x1ZyA9PSBzbHVnO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxufSlcclxuIiwiYW5ndWxhci5tb2R1bGUoJ3NlcnZpY2VzJywgWydzZXJ2aWNlLmNvbnRyb2xsZXInLCAnc2VydmljZS5kZXRhaWwuY29udHJvbGxlcicsICdzZXJ2aWNlLmZhY3RvcnknXSk7XHJcbiJdfQ==
